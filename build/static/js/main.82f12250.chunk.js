(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){},186:function(e,t,a){e.exports=a(314)},191:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(46),s=a.n(o),c=(a(191),a(81)),l=a(15),i=a(16),u=a(18),p=a(17),m=a(19),h=(a(121),a(116)),d=a(326),g=a(174),C=a(324),f=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={clickable:!0},a.handleClick=function(e,t){a.props.setCard(e,t),a.setState({clickable:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.card!==e.card&&this.setState({clickable:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"char-img"},r.a.createElement(g.a,{src:this.props.card.imageurl,wrapped:!0,ui:!1,className:"Medium"})),r.a.createElement(d.a.Content,null,r.a.createElement(d.a.Header,{name:"name",className:"char-name"},this.props.card.name),r.a.createElement(d.a.Description,{className:"card-description"},this.props.card.description)),r.a.createElement(d.a.Content,{extra:!0},r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Content,{className:"flicker-1",onClick:this.state.clickable?function(){return e.handleClick("apperception",e.props.card.apperception)}:null},"Apperception: ",this.props.card.apperception)),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Content,{className:"flicker-2",onClick:this.state.clickable?function(){return e.handleClick("charm",e.props.card.charm)}:null},"Charm: ",this.props.card.charm)),r.a.createElement(C.a.Item,null,r.a.createElement(C.a.Content,{className:"flicker-3",onClick:this.state.clickable?function(){return e.handleClick("aggression",e.props.card.aggression)}:null},"Aggression: ",this.props.card.aggression)))))}}]),t}(r.a.Component),S=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",{className:"char-img"},r.a.createElement(g.a,{src:this.props.card.imageurl,wrapped:!0,ui:!1})),r.a.createElement(d.a.Content,null,r.a.createElement(d.a.Header,{name:"name",className:"char-name"},this.props.card.name),r.a.createElement(d.a.Description,{className:"card-description"},this.props.card.description)),r.a.createElement(d.a.Content,{extra:!0},r.a.createElement(C.a,null,r.a.createElement(C.a.Item,null,this.props.showCardStats?r.a.createElement(C.a.Content,null,"Apperception: ",this.props.card.apperception):"?"),r.a.createElement(C.a.Item,null,this.props.showCardStats?r.a.createElement(C.a.Content,null,"Charm: ",this.props.card.charm):"?"),r.a.createElement(C.a.Item,null,this.props.showCardStats?r.a.createElement(C.a.Content,null,"Aggression: ",this.props.card.aggression):"?"))))}}]),t}(r.a.Component),E=a(330),k=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{as:"h3",block:!0},this.props.currentUser," has ",this.props.cardCount," cards remaining")}}]),t}(r.a.Component),b=a(331),O=a(321),w=a(161),v="https://safe-anchorage-93805.herokuapp.com/api/v1",y="".concat(v,"/cards"),j="".concat(v,"/users"),I="".concat(v,"/login"),U="".concat(v,"/validate"),A="".concat(v,"/totals"),T="".concat(v,"/games"),x=function(e){return e.ok?e.json():e.json().then(function(e){if(e.errors)throw e.errors;return e})},L=function(e){throw console.error(e),e},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(w.a)({Authorization:localStorage.getItem("token")},e)},N={signUp:function(e){return fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})}).then(x).then(function(e){return console.log("token: ",e.token),localStorage.setItem("token",e.token),e.user}).catch(L)},logIn:function(e){return fetch(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:e})}).then(x).then(function(e){return console.log("token: ",e.token),localStorage.setItem("token",e.token),e.user}).catch(L)},validateUser:function(){return localStorage.getItem("token")?fetch(U,{headers:W()}).then(x).then(function(e){return localStorage.setItem("token",e.token),e.user}).catch(L):Promise.resolve({error:"no token"})},clearToken:function(){return localStorage.removeItem("token")},cards:function(){return fetch(y).then(x).catch(L)},fetchTotalScores:function(){return fetch(A).then(x).catch(L)},postGame:function(e){return fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({game:e})}).then(x).then(function(e){return console.log("game: ",e),e}).catch(L)}},F=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){console.log("CardContainer has rendered");this.props.allCards;var e=this.props.currentUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null," ",e?"Logged in as ".concat(e):null),r.a.createElement(b.a,{columns:2,relaxed:"very"},r.a.createElement(b.a.Column,null,r.a.createElement("h1",null,"Your Card"),r.a.createElement(f,{card:this.props.userCard,setCard:this.props.setUserCard,setClickStatusTrue:this.props.setClickStatusTrue}),r.a.createElement(k,{currentUser:this.props.currentUser,cardCount:this.props.userCardCount})),r.a.createElement(b.a.Column,null,r.a.createElement("h1",null,"Opponent Card"),r.a.createElement(S,{card:this.props.oppCard,showCardStats:this.props.showCardStats}),r.a.createElement(k,{user:"Computer",cardCount:this.props.oppCardCount}))),r.a.createElement(O.a,{vertical:!0},"vs"))}}]),t}(n.Component),G=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e;return"Let the battle commence..."===this.props.gameStatus?e={color:"black"}:"win"===this.props.winOrLose?e={color:"green"}:"lose"===this.props.winOrLose&&(e={color:"red"}),r.a.createElement(E.a,{style:e,as:"h3",block:!0},this.props.gameStatus)}}]),t}(r.a.Component),P=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{as:"h3",block:!0},"Congratulations ",this.props.currentUser,"! You Won! Score: ",this.props.winningScore)}}]),t}(r.a.Component),M=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{as:"h3",block:!0},0===this.props.timerState?"Out of time! You Lost":"You were defeated!")}}]),t}(r.a.Component),D=a(38),B=a(328),H=a(90),Y=function(e){var t=e.setTimerState;return r.a.createElement(H.a,{initialTime:65e3,direction:"backward",checkpoints:[{time:3e4,callback:function(){t(30)}},{time:1e4,callback:function(){t(10)}},{time:0,callback:function(){t(0)}}]},function(e){return e.getTimerState,r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a.Minutes,null)," minutes "," ",r.a.createElement(H.a.Seconds,null)," seconds")})},J=a(322),R=function(){return r.a.createElement("div",null,r.a.createElement(J.a,{text:!0},r.a.createElement("br",null),r.a.createElement(E.a,{as:"h2"},"Instructions"),r.a.createElement("p",{className:"instructions"},"Welcome to WestWorld Showdown! The aim of the game is to to take all of your opponents cards as fast as possible! Click the attribute on your card that you think will be higher than your opponents card - if you're correct, you take their card."),r.a.createElement("p",{className:"instructions"},"Collecting all cards before the timer is up means more points! If the timer runs out...you Lose! Good luck!")))},z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={allCards:[],gameStatus:"Let the battle commence...",userIndexCounter:0,oppIndexCounter:0,userAllCards:[],oppAllCards:[],showCardStats:!1,gameStart:!1,userWon:!1,oppWon:!1,timerState:null,winningScore:null,winOrLose:null,attributeClicked:!0},a.setClickStatusTrue=function(){a.setState({attributeClicked:!0})},a.setTimerState=function(e){a.setState({timerState:e})},a.getCards=function(){N.cards().then(function(e){return a.setState({allCards:e})})},a.startGame=function(){var e=a.state.allCards,t=a.shuffleArray(e),n=t.slice(e.length/2,e.length),r=t.slice(0,e.length/2);a.setState({userIndexCounter:0,oppIndexCounter:0,gameStart:!0,userWon:!1,oppWon:!1,showCardStats:!1,userAllCards:n,oppAllCards:r,gameStatus:"Let the battle commence..."})},a.shuffleArray=function(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e},a.postGame=function(){var e=a.state.timerState,t=a.state.userWon?10+e:0;a.setState({winningScore:t});var n={user_id:a.props.currentUserObj.id,score:t};N.postGame(n)},a.setUserCard=function(e,t){a.setState({attributeClicked:!0});var n=a.state.userAllCards.length-1,r=a.state.oppAllCards.length-1;a.state.userIndexCounter<n?console.log(n):a.setState({userIndexCounter:0}),a.state.oppIndexCounter<r?console.log(r):a.setState({oppIndexCounter:0});var o=a.state.userAllCards[a.state.userIndexCounter],s=a.state.oppAllCards[a.state.oppIndexCounter];a.setState({showCardStats:!0});t>s[e]&&!0===a.state.attributeClicked?setTimeout(function(){var e="".concat(o.name," took down ").concat(s.name,"! You took ownership of ").concat(s.name);a.setState({winOrLose:"win"});var t=a.state.oppAllCards.filter(function(e){return e.id!==s.id});0===t.length?(a.setState({userWon:!0}),a.postGame()):console.log("carry on"),a.setState({gameStatus:e,userAllCards:[].concat(Object(h.a)(a.state.userAllCards),[s]),oppAllCards:t,showCardStats:!1,userIndexCounter:a.state.userIndexCounter<a.state.userAllCards.length?a.state.userIndexCounter+1:0})},500):setTimeout(function(){var e="".concat(o.name," was brutally disabled by ").concat(s.name,"! Your opponent took ownership of ").concat(o.name);a.setState({winOrLose:"lose"});var t=a.state.userAllCards.filter(function(e){return e.id!==o.id});0===t.length||0===a.state.timerState?(a.setState({oppWon:!0}),a.postGame()):console.log("carry on"),a.setState({gameStatus:e,oppAllCards:[].concat(Object(h.a)(a.state.oppAllCards),[o]),userAllCards:t,showCardStats:!1,oppIndexCounter:a.state.oppIndexCounter<a.state.oppAllCards.length?a.state.oppIndexCounter+1:0})},500)},a.handleClick=function(){console.log("User logged out!!"),a.props.clearUserState(),N.clearToken()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){if(!localStorage.token)return console.log("No Current User...redirecting back to welcome page"),this.props.history.push("/"),null;this.getCards(),this.props.setCurrentUserFromToken()}},{key:"render",value:function(){var e=this.state.userAllCards[this.state.userIndexCounter],t=this.state.oppAllCards[this.state.oppIndexCounter],a=this.props.currentUser,n=this.state.userAllCards.length,o=this.state.oppAllCards.length,s=this.state,c=s.winningScore,l=s.timerState,i=s.gameStatus,u=s.allCards,p=s.showCardStats,m=s.winOrLose;return r.a.createElement("div",{className:"App"},this.state.userWon?r.a.createElement(P,{winningScore:c,currentUser:a}):null,this.state.oppWon?r.a.createElement(M,{timerState:l,currentUser:a}):null,r.a.createElement(B.a,{as:D.b,to:"/",onClick:this.handleClick},"Log Out"),r.a.createElement(B.a,{as:D.b,to:"/scores"},"See Top Players!"),!this.state.gameStart||this.state.oppWon||this.state.userWon?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{onClick:this.startGame},"Start the game!"),r.a.createElement(R,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{setTimerState:this.setTimerState}),r.a.createElement(G,{currentUser:a,gameStatus:i,winOrLose:m}),r.a.createElement(F,{clearUserState:this.props.clearUserState,currentUser:this.props.currentUser,allCards:u,userCard:e,oppCard:t,userCardCount:n,oppCardCount:o,setUserCard:this.setUserCard,setOppCard:this.setOppCard,showCardStats:p,setClickStatusTrue:this.setClickStatusTrue})))}}]),t}(n.Component),$=a(41),_=a(323),q=a(332),K=a(327),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).toggleButton=function(){a.setState({showLogIn:!a.state.showLogIn})},a.state={showLogIn:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){localStorage.token&&(console.log("Token in localStorage ...redirecting to '/game'"),this.props.history.push("/game"))}},{key:"render",value:function(){var e=this;return console.log("The Welcome Page has rendered"),r.a.createElement(b.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle"},r.a.createElement(b.a.Column,{style:{maxWidth:450}},r.a.createElement("h1",null,"Welcome to Westworld Showdown!"),r.a.createElement(E.a,{as:"h2",color:"teal",textAlign:"center"},this.state.showLogIn?"Log-in to your account":"Welcome! Sign up below:"),r.a.createElement(_.a,{size:"large"},r.a.createElement(q.a,{stacked:!0},r.a.createElement(_.a.Input,{fluid:!0,icon:"user",iconPosition:"left",placeholder:"User Name",name:"username",onChange:this.props.handleFormChange}),r.a.createElement(_.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",name:"password",onChange:this.props.handleFormChange,type:"password"}),r.a.createElement(B.a,{color:"teal",fluid:!0,size:"large",onClick:function(){return e.props.createUserOrSignIn(e.state.showLogIn)}},this.state.showLogIn?" Login":" Sign Up"))),r.a.createElement(K.a,null,this.state.showLogIn?"New to us? ":"Already Regstered? ",r.a.createElement(B.a,{onClick:this.toggleButton},this.state.showLogIn?"Go To Sign Up":"Go To Login"))))}}]),t}(r.a.Component),V=a(175),X=a(325),Z=function(e){var t=["https://react.semantic-ui.com/images/avatar/small/lena.png","https://react.semantic-ui.com/images/avatar/small/matthew.png","https://react.semantic-ui.com/images/avatar/small/lindsay.png","https://react.semantic-ui.com/images/avatar/small/mark.png"];return r.a.createElement(X.a.Row,null,r.a.createElement(X.a.Cell,null,r.a.createElement(E.a,{as:"h2",image:!0},r.a.createElement(g.a,{src:t[Math.floor(Math.random()*t.length)],rounded:!0,size:"mini"}),r.a.createElement(E.a.Content,null,e.userScore.key))),r.a.createElement(X.a.Cell,null,e.userScore.value))},ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).changeScoresToArray=function(){var e=a.props.scores;return Object.entries(e).map(function(e){var t=Object(V.a)(e,2);return{key:t[0],value:t[1]}})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchTotalScores()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(B.a,{as:D.b,to:"/game",onClick:this.handleClick},"Go Back"),r.a.createElement(X.a,{color:"white",basic:"very",celled:!0,collapsing:!0,inverted:!0},r.a.createElement(X.a.Header,null,r.a.createElement(X.a.Row,null,r.a.createElement(X.a.HeaderCell,null,"UserName"),r.a.createElement(X.a.HeaderCell,null,"Total Score"))),r.a.createElement(X.a.Body,null,this.changeScoresToArray().map(function(e,t){return r.a.createElement(Z,{key:t,userScore:e})}))))}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:"",user:null,scores:{}},a.fetchTotalScores=function(){return N.fetchTotalScores().then(function(e){return a.setState({scores:e})})},a.clearUserState=function(){a.setState({username:"",password:"",user:null})},a.setCurrentUserFromToken=function(){(localStorage.token?localStorage.token:null)&&N.validateUser().then(function(e){a.setState({user:e})})},a.handleFormChange=function(e){a.setState(Object(c.a)({},e.target.name,e.target.value))},a.createUserOrSignIn=function(e){console.log(e?"Logging in...":"Signing up...");var t={username:a.state.username,password:a.state.password};e?a.logIn(t):a.createUser(t)},a.createUser=function(e){N.signUp(e).then(function(e){return a.setState({user:e})}).then(function(){console.log(a.props.history),a.props.history.push("/game")}).catch(function(e){a.setState({errors:e}),alert(e)})},a.logIn=function(e){N.logIn(e).then(function(e){return a.setState({user:e})}).then(function(){return a.props.history.push("/game")}).catch(function(e){a.setState({errors:e}),alert(e)})},a.renderWelcomeOrWelcomeBack=function(e){return r.a.createElement(Q,Object.assign({},e,{handleFormChange:a.handleFormChange,username:a.state.username,password:a.state.password,createUserOrSignIn:a.createUserOrSignIn}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("App has mounted"),this.fetchTotalScores().then(function(t){return e.setCurrentUserFromToken()})}},{key:"render",value:function(){var e=this;return console.log("APP HAS RENDERED"),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(r.a.Fragment,null,r.a.createElement($.c,null,r.a.createElement($.a,{exact:!0,path:"/test",render:function(){return r.a.createElement("h1",null,"Home!")}}),r.a.createElement($.a,{exact:!0,path:"/",render:function(t){return e.renderWelcomeOrWelcomeBack(t)}}),r.a.createElement($.a,{exact:!0,path:"/scores",render:function(t){return r.a.createElement(ee,Object.assign({},t,{scores:e.state.scores,fetchTotalScores:e.fetchTotalScores}))}}),r.a.createElement($.a,{exact:!0,path:"/game",render:function(t){return r.a.createElement(z,Object.assign({},t,{currentUser:e.state.username,currentUserObj:e.state.user,clearUserState:e.clearUserState,setCurrentUserFromToken:e.setCurrentUserFromToken}))}})))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null,r.a.createElement($.a,{path:"/",component:te}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[186,1,2]]]);
//# sourceMappingURL=main.82f12250.chunk.js.map